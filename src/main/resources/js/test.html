<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<script src="myUI.js"></script>
<link rel="stylesheet"
	href="style.css"
	media="screen"></link>
<title>Insert title here</title>
</head>
<body>

<script>

	var fp =  {id:"1", 
			name : "mioFile", 
			uploadedBy: "nick", 
			size: 1000,
			lastModified: 1390496392000, 
			hidden: false};
	
	var folder = {id: "asd",
				name:"ciao"};
	
	function rowFolder(f) {

		var div = $("<div></div>");
		
		var name = $("<div></div>");
		var ops = $("<div></div>");
		
		div.addClass("file");
		ops.addClass("ops");
		
		name.html(f.name);
		name.css("cursor", "pointer");
		name.click(function() {myUI.changeDir(fp.id);});
		
	
	    var img = $("<img></img>");
		img.prop('src','../img/remove.png');
		img.prop('height', '50');
		img.prop('width', '75');
		img.click(function() {
				myUI:removeFolder(fp.id);
		});
		ops.append(img);

		
		div.append(name);
		div.append(ops);
		
		return div;
			
	}
	
	function rowFile(fp) {
		var now = new Date();
		var div = $("<div></div>");
		
		var name = $("<div></div>");
		var info = $("<div></div>");
		var ops = $("<div></div>");
		
		div.addClass("file");
		ops.addClass("ops");
		
		name.html(fp.name);
		name.css("cursor", "pointer");
		name.click(function() {myUI.downloadFile(fp.id);});
		
		var time = $("<span class='time'></span>");
		
		var lastModified = new Date(fp.lastModified);
		if (lastModified.getDate() == now.getDate() &&
				lastModified.getMonth() == now.getMonth())
			time.html(lastModified.toLocaleTimeString());
		else
			time.html(lastModified.toLocaleString());
		
		info.append(time);
		info.append($("<span>" + fp.size + "</span>"));
		info.append($("<span>" + fp.uploadedBy + "</span>"));
		
		var opsImageUrls = {
				remove : '../img/remove.png',
				revision : '../img/revision.png',
				share : '../img/share.png',
		};
		
		"remove revision share".split(' ').forEach(function(op) {
			var img = $("<img></img>");
			img.prop('src', opsImageUrls[op]);
			img.prop('height', '50');
			img.prop('width', '75');
			img.click(function() {
				myUI[op](fp.id);
			});
			ops.append(img);
		});
		
		div.append(name);
		div.append(info);
		div.append(ops);
		
		return div;
			
	}
	
	$(document).ready(function() {
		var md = rowFile(fp);
		var asd = rowFolder(folder);
		$(document.body).append(md);
		$(document.body).append(asd);
		return;
	});
</script>

</body>
</html>